// --- database creation --- //
module "database" {
  source     = "github.com/ocilabs/database"
  depends_on = [module.configuration, module.resident, module.network, module.encryption]
  providers  = {oci = oci.service}
  for_each   = {for db in local.databases : db.name => db}
  tenancy    = module.configuration.tenancy
  resident   = module.configuration.resident
  network    = module.configuration.network[...]
  encryption = module.configuration.encryption[...]
  input = {
    password   = var.create_wallet ? "wallet" : "random"
  }
  assets = {
    resident   = module.resident
    encryption = module.encryption
    network    = module.network
  }
}
output "encryption" {
  value = {
    for resource, parameter in module.encryption : resource => parameter
  }
}
// --- database creation --- //